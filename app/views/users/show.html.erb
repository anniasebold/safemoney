<% @title= current_user.name + " - Perfil" %>
<div id="profile-path">
  <div class="container">
      <div class="row my-2">
          <div class="col-lg-8 order-lg-2">
              <ul class="nav nav-tabs">
                  <li class="nav-item">
                      <a href="" data-target="#profile" data-toggle="tab" class="nav-link active">Profile</a>
                  </li>
                  <li class="nav-item">
                      <a href="" data-target="#posts" data-toggle="tab" class="nav-link">Postagens</a>
                  </li>
                <% if current_user.id == @user.id %>
                  <li class="nav-item">
                      <%= link_to "Editar", edit_user_registration_path, class: "nav-link" %>
                  </li>
                <% end %>
              </ul>
              <div class="tab-content py-4">
                  <div class="tab-pane active" id="profile">
                      <div class="col-md-4 order-lg-1 text-center">
                        <%= image_tag(@user.avatar, class: "image-avatar") if @user.avatar.attached? %>
                      </div>
                      <h3 class="mb-3">Perfil do Usuário</h3>
                      <div class="row">
                          <div class="col-md-12">
                              <h4 class="mb-3">Informações do Perfil</h4>
                              <h5>Nome:</h5>
                                <div class="alert alert-info">
                                  <h6 class="mb-3"><%= @user.name %></h6>
                                </div>
                              <h5>Email:</h5>
                                <div class="alert alert-info">
                                  <h6 class="mb-3"><%= @user.email %></h6>
                                </div>
                              <h5>Formação Acadêmica:</h5>
                                <div class="alert alert-info">
                                  <h6><%= t("enumerize.user.education.#{@user.education}") %></h6>
                                </div>
                          </div>
                      </div>
                      <!--/row-->
                  </div>
                  <div class="tab-pane" id="posts">

                    <% if @user.posts.present? %>
                      <% @user.posts.each do |post| %>
                          <div class="card mb-4">
                            <!-- Card header -->
                            <div class="card-header">
                              <h2 class="card-title"><%= post.title %></h2>
                              <% post.categories.each do |categorie| %>
                                <%= link_to categorie.name, root_path, class: 'badge badge-info'%>
                              <% end %>
                            </div>
                            <!-- Card body -->
                            <div class="card-body">
                                <%= image_tag(post.image, class: "img-fluid") if post.image.attached? %>  
                              <p class="card-text"><%= post.text.truncate(250) %></p>
                              
                              <!-- Btn Read More -->
                              <div class="d-flex">
                                <div class="mr-auto align-self-center p-2">
                                  <%= link_to post_path(post.id), class:"btn btn-primary" do %>
                                    Leia mais
                                    <i class="fas fa-arrow-right"></i>
                                  <% end %>
                                </div>
                                <% if post.user.email == current_user.email %>
                                  <%= link_to "Editar", edit_post_path(post.id), class: "btn btn-light align-self-center p-2 ml-2 mr-3 " %>
                                  <%= link_to "Excluir", post_path(post.id), method: :delete, class: "btn btn-danger align-self-center p-2", data: {confirm: "Tem certeza que deseja remover a postagem #{post.title}?"} %>
                                <% else %>
                                  <%= link_to "Reportar", root_path, class: "btn btn-danger align-self-center p-2 ml-2" %>
                                <% end %>
                              </div>
                            </div>
                            <!-- Card footer -->
                            <div class="card-footer text-muted">
                                Postado em <%= l(post.created_at, format: :long) %>
                                  por
                                <%= link_to post.user.name, user_path(post.user.id) %>
                            </div>
                          </div>
                        <% end %>
                      <% else %>
                        <div class="alert alert-danger">
                          O usuário <%= @user.name %> não possui nenhuma postagem.
                        </div>
                      <% end %>

                  </div>
                  <div class="tab-pane" id="edit">
                      <form role="form">
                          <div class="form-group row">
                              <label class="col-lg-3 col-form-label form-control-label">First name</label>
                              <div class="col-lg-9">
                                  <input class="form-control" type="text" value="Jane">
                              </div>
                          </div>
                          <div class="form-group row">
                              <label class="col-lg-3 col-form-label form-control-label">Last name</label>
                              <div class="col-lg-9">
                                  <input class="form-control" type="text" value="Bishop">
                              </div>
                          </div>
                          <div class="form-group row">
                              <label class="col-lg-3 col-form-label form-control-label">Email</label>
                              <div class="col-lg-9">
                                  <input class="form-control" type="email" value="email@gmail.com">
                              </div>
                          </div>
                          <div class="form-group row">
                              <label class="col-lg-3 col-form-label form-control-label">Company</label>
                              <div class="col-lg-9">
                                  <input class="form-control" type="text" value="">
                              </div>
                          </div>
                          <div class="form-group row">
                              <label class="col-lg-3 col-form-label form-control-label">Website</label>
                              <div class="col-lg-9">
                                  <input class="form-control" type="url" value="">
                              </div>
                          </div>
                          <div class="form-group row">
                              <label class="col-lg-3 col-form-label form-control-label">Address</label>
                              <div class="col-lg-9">
                                  <input class="form-control" type="text" value="" placeholder="Street">
                              </div>
                          </div>
                          <div class="form-group row">
                              <label class="col-lg-3 col-form-label form-control-label"></label>
                              <div class="col-lg-6">
                                  <input class="form-control" type="text" value="" placeholder="City">
                              </div>
                              <div class="col-lg-3">
                                  <input class="form-control" type="text" value="" placeholder="State">
                              </div>
                          </div>
                          <div class="form-group row">
                              <label class="col-lg-3 col-form-label form-control-label">Time Zone</label>
                              <div class="col-lg-9">
                                  <select id="user_time_zone" class="form-control" size="0">
                                      <option value="Hawaii">(GMT-10:00) Hawaii</option>
                                      <option value="Alaska">(GMT-09:00) Alaska</option>
                                      <option value="Pacific Time (US &amp; Canada)">(GMT-08:00) Pacific Time (US &amp; Canada)</option>
                                      <option value="Arizona">(GMT-07:00) Arizona</option>
                                      <option value="Mountain Time (US &amp; Canada)">(GMT-07:00) Mountain Time (US &amp; Canada)</option>
                                      <option value="Central Time (US &amp; Canada)" selected="selected">(GMT-06:00) Central Time (US &amp; Canada)</option>
                                      <option value="Eastern Time (US &amp; Canada)">(GMT-05:00) Eastern Time (US &amp; Canada)</option>
                                      <option value="Indiana (East)">(GMT-05:00) Indiana (East)</option>
                                  </select>
                              </div>
                          </div>
                          <div class="form-group row">
                              <label class="col-lg-3 col-form-label form-control-label">Username</label>
                              <div class="col-lg-9">
                                  <input class="form-control" type="text" value="janeuser">
                              </div>
                          </div>
                          <div class="form-group row">
                              <label class="col-lg-3 col-form-label form-control-label">Password</label>
                              <div class="col-lg-9">
                                  <input class="form-control" type="password" value="11111122333">
                              </div>
                          </div>
                          <div class="form-group row">
                              <label class="col-lg-3 col-form-label form-control-label">Confirm password</label>
                              <div class="col-lg-9">
                                  <input class="form-control" type="password" value="11111122333">
                              </div>
                          </div>
                          <div class="form-group row">
                              <label class="col-lg-3 col-form-label form-control-label"></label>
                              <div class="col-lg-9">
                                  <input type="reset" class="btn btn-secondary" value="Cancel">
                                  <input type="button" class="btn btn-primary" value="Save Changes">
                              </div>
                          </div>
                      </form>
                  </div>
              </div>
          </div>
      </div>
  </div>
</div>